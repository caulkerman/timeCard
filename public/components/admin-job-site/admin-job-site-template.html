<link rel="stylesheet" href="components/admin-job-site/admin-job-site.css">

<p><span id="jobSiteNameBold">{{jobsite.name}}<span></p>
<p>General Contractor: {{jobsite.contractor}}</p>
<p>Total Job Site Man Hours: {{jobsite.man_hours}}</p>

<!--<button ng-click="showAddTime()" ng-hide="showNewTimeEvent">Add Late Time Employee Time</button>-->
<!--<button ng-click="hideAddTime()" ng-show="showNewTimeEvent">Hide Late Employee Time</button>-->
<button>This Job Site Is Completed</button>
<br />
<br />
<button ng-click="showUpdateForm()" ng-hide="showUpdateJobSite">Update Jobsite Details</button>
<button ng-click="hideUpdateForm()" ng-show="showUpdateJobSite">Hide Jobsite Details</button>

<form ng-show="showUpdateJobSite" ng-submit="updateTheJobSite(jobsite.contractor, jobsite.job_address, jobsite.job_details, jobsite.materials_needed, jobsite.name, jobsite.superintendent_name, jobsite.superintendent_telephone)">
    
    <div >
        <label for="contractor">Contractor: </label>
        <input type="text" class="updateJobSite" ng-model="jobsite.contractor" name="contractor">
    </div>

    <div>
        <label for="job_address">Job Address: </label>
        <input type="text" class="updateJobSite" ng-model="jobsite.job_address" name="job_address">
    </div>

    <div>
        <label for="job_details">Job Details: </label>
        <textarea class="updateJobSite" ng-model="jobsite.job_details" name="job_details"></textarea>
    </div>

    <div>
        <label for="materials_needed">Materials Needed: </label>
        <textarea class="updateJobSite" ng-model="jobsite.materials_needed" name="materials_needed"></textarea>
    </div>

    <div>
        <label for="name">Job Name: </label>
        <input type="text" class="updateJobSite" ng-model="jobsite.name" name="name">
    </div>

    <div>
        <label for="superintendent_name">Superintendent Name: </label>
        <input type="text" class="updateJobSite" ng-model="jobsite.superintendent_name" name="superintendent_name">
    </div>

    <div>
        <label for="superintendent_telephone">Superintendant Telephone: </label>
        <input type="number" class="updateJobSite" ng-model="jobsite.superintendent_telephone" name="superintendent_telephone">
    </div>

    <input type="submit" class="updateJobSite" value="Update Jobsite">
</form>

    
    <!--  You need to set up a spot to show whether the job time is T&M, maybe use hide/show if it is.-->
       
    <input type="text" placeholder="Filter the Dates" ng-model="filter_date"> 
    <div ng-repeat="timecard in dailyTCs | filter: {theDate:filter_date} track by $index">  <!-- This filter is not complete, it needs to filter only the daily_time_cards array and not the employees_worked array too.-->
        <ul > 
            <li>
                
                <a id="timeCard" href="" ng-click="showDailyTCs($index)" >{{timecard.theDate}}</a>
                <button ng-show="showDTCs[$index]" ng-click="hideDailyTCs($index)">X</button>
                <div class="hidden-daily-time-card" ng-show="showDTCs[$index]"> <!-- In this tag is where you need to put your directive that will choose the specific $index to hide and show -->
                    <p>Materials Used: {{timecard.materials_used}}</p>
                    <p>Notes: {{timecard.notes}}</p>
                    
                    <table st-table="students" class="table table-striped">
                        <thead>
                            <tr>
                                <td>Employee Name</td>
                                <td>Hours Worked</td>
                                <td>Edit</td>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="employees in dailyTCs[$index].employees_worked track by $index" > <!--make sure to ng-repeat this -->
                                <td>{{employees.employeeName}}</td>
                                <td><input type="number" min=".25" max="24" ng-model="employees.hours_worked"></td>
                                <td><button ng-click="editEmployee(employees.hours_worked, employees._id)">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>
                
                </div>
            </li>
        </ul>

        <hr>
    </div>
    



